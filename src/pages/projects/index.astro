---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Card from '../../components/Card.astro';
import Tag from '../../components/Tag.astro';
import Button from '../../components/Button.astro';
import { buildBreadcrumbSchema } from '../../lib/seo';

const breadcrumbSchema = buildBreadcrumbSchema([
  { name: 'Home', url: 'https://fredbrunner.com/' },
  { name: 'Projects' },
]);

const projects = [
  {
    title: 'ClaimEval',
    oneLiner: 'QA copilot that helps claims leaders review more files with higher consistency',
    tags: ['AI', 'Insurance', 'QA'],
    outcome: 'Faster QA cycles, clearer audit trail',
    href: '/projects/claimeval',
    thumbnail: '/img/icons/claimeval-icon.svg',
    demoHref: 'https://claimeval.vercel.app/claims',
    featured: true,
  },
  {
    title: 'Prompt Management Playbook',
    oneLiner: 'Versioned, testable, reviewable prompts as code',
    tags: ['AI', 'DevOps', 'LLM'],
    outcome: 'Zero mystery breakages when prompts change',
    href: '/projects/prompt-playbook',
    thumbnail: '/img/icons/prompt-playbook-icon.svg',
    featured: true,
  },
  {
    title: 'Agentic Context Builder',
    oneLiner: 'Turning messy inputs into reliable LLM work units',
    tags: ['AI', 'Architecture', 'LLM'],
    outcome: 'Debuggable, composable agent workflows',
    href: '/projects/context-builder',
    thumbnail: '/img/icons/context-builder-icon.svg',
    featured: true,
  },
];

const allTags = [...new Set(projects.flatMap((p) => p.tags))].sort();
---

<BaseLayout
  title="AI Projects & Case Studies"
  description="Enterprise AI implementations by Fred Brunner. Case studies in claims automation, prompt management, and LLM pipelines. View proof of work from real projects."
  schema={breadcrumbSchema}
>
  <section class="bg-white py-16 sm:py-20">
    <div class="mx-auto max-w-5xl px-4 sm:px-6">
    <h1 class="text-4xl font-bold tracking-tight text-gray-900">Projects</h1>
    <p class="mt-4 text-lg text-gray-600 max-w-2xl">
      Case studies from real work. Each project follows the same format:
      Problem, Constraints, Approach, Results, Artifacts.
    </p>

    <!-- Tag filters -->
    <div class="mt-8 flex flex-wrap gap-2">
      {allTags.map((tag) => (
        <Tag href={`/tags/${tag.toLowerCase()}`}>{tag}</Tag>
      ))}
    </div>

    <!-- Project grid - matches Featured Work style -->
    <div class="mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-3 stagger-children">
      {projects.map((project) => (
        <Card class="flex flex-col">
          {project.thumbnail && (
            <img
              src={project.thumbnail}
              alt={`${project.title} illustration`}
              class="w-full h-44 object-contain rounded-lg mb-4 bg-light-green-bg"
              loading="lazy"
            />
          )}
          <div class="flex flex-wrap gap-2 mb-3">
            {project.tags.map((tag) => (
              <Tag>{tag}</Tag>
            ))}
          </div>
          <h2 class="font-semibold text-lg text-gray-900">{project.title}</h2>
          <p class="mt-1 text-sm text-gray-500">{project.oneLiner}</p>
          <p class="mt-3 text-sm text-gray-600">
            <span class="font-medium text-owl-green">Outcome:</span> {project.outcome}
          </p>
          <div class="mt-auto pt-4 border-t border-gray-100 flex flex-wrap gap-2">
            <Button href={project.href} variant="secondary" size="sm">Case study</Button>
            {project.demoHref && (
              <Button href={project.demoHref} variant="ghost" size="sm">Live demo &rarr;</Button>
            )}
          </div>
        </Card>
      ))}
    </div>
    </div>
  </section>
</BaseLayout>
